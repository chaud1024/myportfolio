<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../css/common.css">
    <link rel="stylesheet" href="../../css/reset.css">
    <link rel="stylesheet" href="../../css/layout.css">
    <link rel="stylesheet" href="../../css/admin.css">
    <title>온디멘드 어드민 원단관리-상세</title>
</head>

<body>


    <div class="adm-wrap">


        <!----------------------------HEADER---------------------------->

        <header class="header adm-header">
            <div class="header-top">
                <div class="userInfo">
                    <ul>
                        <li><a href="" class="login">로그인</a></li>
                        <li><a href="" class="login-out">관리자 로그아웃</a></li>
                    </ul>
                </div>
            </div>

            <div class="header-bottom">
                <div class="inner">
                    <h1 class="logo">
                        <a href="../main/admin_main.html"><img src="../../img/common/adm_logo_w01.png" alt="테크노메이드로고"></a>
                    </h1>
                    <nav>
                        <ul class="nav-menu">
                            <li><a href="../order/admin_order_list.html">주문관리</a></li>
                            <li><a href="../user/admin_user_list.html">회원관리</a></li>
                            <li><a href="../inquiry/admin_inquiry_list.html">문의관리</a></li>
                            <li><a href="../review/admin_review_list.html">후기관리</a></li>
                            <li class="active"><a href="../fabric/admin_fabric_list.html">원단관리</a></li>
                            <li>
                                <a href="">카테고리</a>
                                <ul class="nav-sub-menu">
                                    <li><a href="../category/admin_cate_inquiry.html">문의관리</a></li>
                                    <li><a href="../category/admin_cate_style.html">스타일관리</a></li>
                                    <li><a href="../category/admin_cate_fabric.html">원단관리</a></li>
                                </ul>
                            </li>
                            <li><a href="../partner/admin_partner_dtl.html">협력업체</a></li>
                            <li class="last"><a href="../member/admin_member_list.html">관리자</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </header>

        <!---------------------------- SUB CONTAINER ---------------------------->

        <div class="sub-container">

            <div class="sub-wrap">
                <div class="sub-inner">

                    <div class="wrap__adm-cont">

                        <div class="inner__adm-cont">

                            <div class="adm-cont-titl">
                                <h1 class="">원단관리</h1>
                                <button type="button" class="btn btn-prm btn-wr" onclick="location.href='admin_fabric_dtl_add.html' ">등록</button> 
                            </div>
                            <!---.odr-list-titl end --->

                            <div class="adm-cont adm-fbr-dtl">

                                <div class="wrap__adm-sect">

                                    <div class="adm-sect">
                                        <div class="adm-sect-titl">
                                            <h1>원단상세정보수정</h1>
                                            <button type="button" class="btn btn-dlt btn-modal-add">삭제</button> 
                                        </div>

                                        <div class="wrap__adm-sect-cont">
                                            <div class="adm-sect-cont-img">
                                                <div class="wrap__adm-input-file">
                                                    <div class="adm-input-file">
                                                        <div id="att_zone" class="file-zone" data-pladeholder="파일첨부를 위해 파일선택버튼을 클릭해주세요."></div>
                                                        <label class="" for="">원단이미지 첨부</label>
                                                        <div class="wrap__adm-img-prevw">
                                                            <label for="btnAtt" class="btn btn-prm">파일업로드</label>
                                                            <input type="file" id="btnAtt" class="btn"  multiple="multiple" />
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <ul class="adm-sect-cont">
                                                <li>
                                                    <div class="wrap__input input-rad">
                                                        <div class="wrap__sel ">
                                                            <label for="" class="label-tit">원단대분류</label>
                                                            <select name="" class=" wd-shrt" id="">
                                                                <option value="0" selected="selected">원단대분류선택</option>
                                                                <option value="코튼">코튼</option>
                                                                <option value="린넨">린넨</option>
                                                                <option value="실크">실크</option>
                                                                <option value="TR">TR</option>
                                                                <option value="레이온">레이온</option>
                                                                <option value="텐셀">텐셀</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="wrap__input input-rad">
                                                        <div class="wrap__sel adm-fbr">
                                                            <label for="" class="label-tit">원단소분류</label>
                                                            <select name="" class=" wd-shrt" id="">
                                                                <option value="0" selected="selected">원단소분류선택</option>
                                                                <option value="무지">무지</option>
                                                                <option value="스트라이프">스트라이프</option>
                                                                <option value="폴카도트">폴카도트</option>
                                                                <option value="깅엄체크">깅엄체크</option>
                                                                <option value="하운드투스">하운드투스</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="wrap__input input-rad">
                                                        <label for="" class="label-tit">원단타입</label>
                                                        <input type="text" name="" id="" class=" input-txt wd-mdm" lang="en" value="코튼체크 C-gr">
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="wrap__input input-rad">
                                                        <label for="" class="label-tit">원단코드</label>
                                                        <input type="text" name="" id="" class=" input-txt wd-mdm" lang="en"value="CTN123">
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="wrap__input input-rad">
                                                        <label for="" class="label-tit">원단혼용률</label>
                                                        <input type="text" name="" id="" class=" input-txt wd-mdm" lang="en" value="코튼 50%, 실크 30%, 폴리 20%">
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="wrap__input input-rad fbr-story">
                                                        <label for="" class="label-tit">스토리텔링01</label>
                                                        <input type="text" name="" id="" class=" input-txt wd-mdm fbr-story" lang="en" value="전체폭은 54-58” 이지만 가용폭은 52-56” 입니다.">
                                                        <button class="btn btn-prm">추가</button>
                                                    </div>
                                                    <div class="wrap__input input-rad fbr-story">
                                                        <label for="" class="label-tit">스토리텔링02</label>
                                                        <input type="text" name="" id="" class=" input-txt wd-mdm fbr-story" lang="en" value="전체폭은 54-58” 이지만 가용폭은 52-56” 입니다.">
                                                        <button class="btn btn-dlt">삭제</button>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="wrap__input input-rad">
                                                        <label for="" class="label-tit">단가</label>
                                                        <input type="text" name="" id="" class=" input-txt wd-mdm" lang="en" value="10,000원">
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="wrap__input input-rad">
                                                        <label for="" class="label-tit">공임비</label>
                                                        <input type="text" name="" id="" class=" input-txt wd-mdm" lang="en" value="5,000원">
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="wrap__input input-rad">
                                                        <label for="" class="label-tit">재고량</label>
                                                        <input type="text" name="" id="" class=" input-txt wd-mdm" lang="en" value="100">
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="wrap__input input-rad">
                                                        <div class="wrap__sel ">
                                                            <label for="" class="label-tit">판매여부</label>
                                                            <select name="" class=" wd-shrt" id="">
                                                                <option value="0" selected="selected">판매여부선택</option>
                                                                <option value="판매중">판매중</option>
                                                                <option value="입고예정">입고예정</option>
                                                                <option value="일시품절">일시품절</option>
                                                                <option value="판매중지">판매중지</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </li>
                                            </ul>
                                            <!----- .wrap__adm-sect-cont end ---->

                                        </div>
                                        <!----- wrap__adm-sect-cont end ---->

                                    </div>
                                    <!---- .adm-sect end ----->



                                </div>
                                <!----- .wrap__adm-sect end ---->

                            </div>
                            <!----------- .adm-tbl adm-odr-dtl end ------------>

                            <div class="btn-wrap">
                                <button type="button" id="" class="btn-list" onclick="location.href='admin_fabric_list.html' ">목록</button>
                                <button type="button" id="" class="btn-list btn-modal-add">수정</button>
                            </div>

                            <div class="wrap__modal">

                                <div class="modal-mdf modal">
                                    <div class="modal-content">
                                        <div class="modal-top">
                                            <h2>삭제하시겠습니까?</h2>
                                        </div>

                                        <div class="modal-bttm">
                                            <div class="btn-wrap adm-cate-modal-btn">
                                                <button type="button" class="btn btn-cxl"
                                                    id="">취소</button>
                                                    <button type="button" class="btn btn-cfm"
                                                    id="">확인</button>
                                            </div>
                                        </div>

                                    </div>
                                    <!----- .modal-content end ----->
                                </div>
                                <!---- .modal-custom modal end ---->
                            </div>
                            <!-------------------------- 등록버튼 클릭 시 모달 활성화 ----------------------->
                            <!------------------------------- .wrap__modal end ---------------------------->

                            <div class="wrap__modal">

                                <div class="modal-mdf modal">
                                    <div class="modal-content">
                                        <div class="modal-top">
                                            <h2>수정하시겠습니까?</h2>
                                        </div>

                                        <div class="modal-bttm">
                                            <div class="btn-wrap adm-cate-modal-btn">
                                                <button type="button" class="btn btn-cxl"
                                                    id="">취소</button>
                                                    <button type="button" class="btn btn-cfm"
                                                    id="">확인</button>
                                            </div>
                                        </div>

                                    </div>
                                    <!----- .modal-content end ----->
                                </div>
                                <!---- .modal-custom modal end ---->
                            </div>
                            <!-------------------------- 등록버튼 클릭 시 모달 활성화 ----------------------->
                            <!------------------------------- .wrap__modal end ---------------------------->



                        </div>
                        <!---------- .inner__adm-tbl end ----------->


                    </div>



                </div>
                <!------------------- .sub-inner end ------------------->


            </div>
            <!------------------- .sub-wrap end ------------------->


        </div>
        <!------------------- .sub-container end ------------------->


    </div>
    <!--------------- .adm-wrap end ---------------->


    <script>
        //테이블 체크박스 전체선택
        function selectAll(selectAll) {
            const chckBox = document.getElementsByName("odr-list");

            chckBox.forEach((checkbox) => {
                checkbox.checked = selectAll.checked;
            })
        }


        ( /* att_zone : 이미지들이 들어갈 위치 id, btn : file tag id */
            imageView = function imageView(att_zone, btn) {

                let attZone = document.getElementById(att_zone);
                let btnAtt = document.getElementById(btn)
                let sel_files = [];

                // 미리보기 이미지 속성
                let img_style = 'width:100%;height:100%;z-index:none;border-radius : 8px';
                // 이미지안에 표시되는 체크박스의 속성
                let chk_style = 'width:30px;height:30px;position:absolute;font-size:18px;' +
                    'right:0px;top:0px;z-index:999;background-color:transparent;color:#fff;border:none';

                btnAtt.onchange = function (e) {
                    let files = e.target.files;
                    let fileArr = Array.prototype.slice.call(files)
                    for (f of fileArr) {
                        imageLoader(f);
                    }
                }


                /*첨부된 이미지를을 배열에 넣고 미리보기 */
                imageLoader = function (file) {
                    sel_files.push(file);
                    let reader = new FileReader();
                    reader.onload = function (ee) {
                        let img = document.createElement('img')
                        img.setAttribute('style', img_style)
                        img.src = ee.target.result;
                        attZone.appendChild(makeDiv(img, file));
                    }

                    reader.readAsDataURL(file);
                }

                /*첨부된 파일이 있는 경우 checkbox와 함께 attZone에 추가할 div를 만들어 반환 */
                makeDiv = function (img, file) {
                    let div = document.createElement('div')

                    let btn = document.createElement('input')
                    btn.setAttribute('type', 'button')
                    btn.setAttribute('value', '✕')
                    btn.setAttribute('class', 'close-img')
                    btn.setAttribute('delFile', file.name);
                    btn.setAttribute('style', chk_style);
                    btn.onclick = function (ev) {
                        let ele = ev.srcElement;
                        let delFile = ele.getAttribute('delFile');
                        for (let i = 0; i < sel_files.length; i++) {
                            if (delFile == sel_files[i].name) {
                                sel_files.splice(i, 1);
                            }
                        }

                        dt = new DataTransfer();
                        for (f in sel_files) {
                            let file = sel_files[f];
                            dt.items.add(file);
                        }
                        btnAtt.files = dt.files;
                        let p = ele.parentNode;
                        attZone.removeChild(p)
                    }
                    div.appendChild(img)
                    div.appendChild(btn)
                    return div
                }
            }
        )('att_zone', 'btnAtt')



        // Modal을 가져옵니다.
        var modals = document.getElementsByClassName("modal");
        // Modal을 띄우는 클래스 이름을 가져옵니다.
        var btns = document.getElementsByClassName("btn-modal-add");
        // Modal을 닫는 close 클래스를 가져옵니다.
        var cfm = document.getElementsByClassName("btn-cfm");
        var cxl = document.getElementsByClassName("btn-cxl");
        var funcs = [];

        // Modal을 띄우고 닫는 클릭 이벤트를 정의한 함수
        function Modal(num) {
            return function () {
                // 해당 클래스의 내용을 클릭하면 Modal을 띄웁니다.
                btns[num].onclick = function () {
                    modals[num].style.display = "block";
                    console.log(num);
                };

                // 확인, 취소버튼 클릭하면 Modal이 닫습니다.
                cfm[num].onclick = function () {
                    modals[num].style.display = "none";
                };
                // 확인, 취소버튼 클릭하면 Modal이 닫습니다.
                cxl[num].onclick = function () {
                    modals[num].style.display = "none";
                };
            };
        }

        // 원하는 Modal 수만큼 Modal 함수를 호출해서 funcs 함수에 정의합니다.
        for (var i = 0; i < btns.length; i++) {
            funcs[i] = Modal(i);
        }

        // 원하는 Modal 수만큼 funcs 함수를 호출합니다.
        for (var j = 0; j < btns.length; j++) {
            funcs[j]();
        }

        // Modal 영역 밖을 클릭하면 Modal을 닫습니다.
        window.onclick = function (event) {
            if (event.target.className == "modal") {
                event.target.style.display = "none";
            }
        };


    </script>


</body>

</html>